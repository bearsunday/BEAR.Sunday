---
layout: default
title: BEAR.Sunday | アプリケーションインスタンススクリプト
---
# アプリケーションインスタンススクリプト

## 導入 

インスタンススクリプトはアプリケーションインスタンスを作成するスクリプトです。アプリケーション利用に必要なオートローダーの設定も行います。

# インスタンス作成 

インスタンススクリプトの確信部分は以下のコードにあたる部分です。

	$injector = Injector::create([new ProdModule]);
	$app = $injector->getInstance('BEAR\Sunday\Extension\Application\AppInterface');


`ProdModule`は[module モジュール]の一つで、アプリケーションの実行モードに応じた構成の知識(DIとAOPの設定)があります。

アプリケーションクラス名もまたモジュールで構成されています。インジェクターはアプリケーションクラスが束縛されたアプリケーションコンテキストインターフェイスを指定することでアプリケーションオブジェクトが取得されます。

## インスタンス取得の再利用 

アプリケーションオブジェクトを取得するコストは巨大です。モジュールで設定されたアノテーションの名前解決のための元PHPスクリプトの構文解析、DIのインジェクト、AOPのメソッドインタセプター束縛、これらのコストをカットするためにプロダクション環境ではアプリケーションオブジェクトをこのインスタンススクリプト内でキャッシュして再利用します。

## パフォーマンス 

再利用することでbootstrap時のアノテーション解析、DIやAOPの束縛コストが原理的にゼロになります。BEAR.Sundayは多くの抽象化レイヤーを持った柔軟な設計が可能ですがこの再利用によって、機能によるパフォーマンスインパクトを最小限にし、最高度の柔軟性と最高度のパフォーマンスを両立させています。

またアプリケーションが利用するサービスコンポーネントがリクエスト毎に変わらない事の保証は、より安定したソフトウエア品質にも寄与しています。